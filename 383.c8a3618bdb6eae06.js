"use strict";(self.webpackChunkstock_nse=self.webpackChunkstock_nse||[]).push([[383],{1383:(b,g,l)=>{l.r(g),l.d(g,{OptionModule:()=>k});var d=l(6895),h=l(1162),x=l(9646),m=l(7579),Z=l(5577),f=l(4004),t=l(8256),E=l(2342),s=l(433);function v(n,i){if(1&n&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}const u=function(n,i,e){return{"bg-primary-subtle":n,"text-danger":i,"text-success":e}};function C(n,i){if(1&n&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td",15),t._uU(6),t.qZA(),t.TgZ(7,"td",16),t._uU(8),t.qZA(),t.TgZ(9,"td",15),t._uU(10),t.qZA(),t.TgZ(11,"td",18),t._uU(12),t.qZA(),t.TgZ(13,"td",18),t._uU(14),t.qZA()()),2&n){const e=i.$implicit,a=t.oxw(4);t.xp6(1),t.Tol(t.kEZ(23,u,e.strikePrice<((null==e||null==e.CE?null:e.CE.underlyingValue)||0),(e.CE.change||0)<0,(e.CE.change||0)>0)),t.Q6J("title",e.CE.change),t.xp6(1),t.hij(" ",e.CE.openInterest," "),t.xp6(1),t.Tol(t.kEZ(27,u,e.strikePrice<((null==e||null==e.CE?null:e.CE.underlyingValue)||0),(e.CE.change||0)<0,(e.CE.change||0)>0)),t.Q6J("title",e.CE.change),t.xp6(1),t.hij(" ",e.CE.changeinOpenInterest," "),t.xp6(1),t.Tol(t.kEZ(31,u,e.strikePrice<((null==e||null==e.CE?null:e.CE.underlyingValue)||0),(e.CE.change||0)<0,(e.CE.change||0)>0)),t.xp6(1),t.hij(" ",a.n(e.CE.lastPrice)," "),t.xp6(2),t.Oqu(e.strikePrice),t.xp6(1),t.Tol(t.kEZ(35,u,e.strikePrice>((null==e||null==e.PE?null:e.PE.underlyingValue)||0),(e.PE.change||0)<0,(e.PE.change||0)>0)),t.xp6(1),t.hij(" ",a.n(e.PE.lastPrice)," "),t.xp6(1),t.Tol(t.kEZ(39,u,e.strikePrice>((null==e||null==e.PE?null:e.PE.underlyingValue)||0),(e.PE.change||0)<0,(e.PE.change||0)>0)),t.Q6J("title",e.PE.change),t.xp6(1),t.hij(" ",e.PE.changeinOpenInterest," "),t.xp6(1),t.Tol(t.kEZ(43,u,e.strikePrice>((null==e||null==e.PE?null:e.PE.underlyingValue)||0),(e.PE.change||0)<0,(e.PE.change||0)>0)),t.Q6J("title",e.PE.change),t.xp6(1),t.hij(" ",e.PE.openInterest," ")}}function T(n,i){if(1&n&&(t.TgZ(0,"div",10)(1,"span",11),t._uU(2),t.qZA(),t._uU(3," Underlying Index: "),t.TgZ(4,"span",11),t._uU(5),t.qZA(),t.TgZ(6,"span",11),t._uU(7),t.ALo(8,"number"),t.qZA(),t._uU(9," As on "),t.TgZ(10,"span",11),t._uU(11),t.qZA(),t._UZ(12,"span",12),t.TgZ(13,"table",13)(14,"thead",14)(15,"tr")(16,"th",15),t._uU(17,"OI"),t.qZA(),t.TgZ(18,"th",15),t._uU(19,"COI"),t.qZA(),t.TgZ(20,"th",15),t._uU(21,"lastPrice"),t.qZA(),t.TgZ(22,"th",16),t._uU(23,"Strike Price"),t.qZA(),t.TgZ(24,"th",15),t._uU(25,"lastPrice"),t.qZA(),t.TgZ(26,"th",15),t._uU(27,"COI"),t.qZA(),t.TgZ(28,"th",15),t._uU(29,"OI"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,C,15,47,"tr",17),t.qZA()()()),2&n){const e=i.$implicit,a=t.oxw(2).ngIf,o=t.oxw();t.xp6(2),t.hij(" ",e," "),t.xp6(3),t.hij(" ",o.data.contracts," "),t.xp6(2),t.hij(" ",t.lcZ(8,5,o.ob(a.data).data.records.underlyingValue)," "),t.xp6(4),t.hij(" ",o.ob(a.data).data.records.timestamp," "),t.xp6(20),t.Q6J("ngForOf",o.ob(a.data).expiryData[e])}}const y=function(){return["NIFTY","FINNIFTY","BANKNIFTY","MIDCPNIFTY"]};function O(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"select",4),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw(2);return t.KtG(r.data.contracts=o)})("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.h_contracts(o.data.contracts))}),t.TgZ(3,"option"),t._uU(4,"--Select--"),t.qZA(),t.YNc(5,v,2,2,"option",5),t.qZA()(),t.TgZ(6,"div",3)(7,"button",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().ngIf,r=t.oxw();return t.KtG(r.reset(r.data,o))}),t._UZ(8,"i",7),t.qZA()(),t.YNc(9,T,32,7,"div",8),t.qZA()}if(2&n){const e=t.oxw().ngIf,a=t.oxw();t.xp6(2),t.Q6J("ngModel",a.data.contracts),t.xp6(3),t.Q6J("ngForOf",t.DdM(3,y)),t.xp6(4),t.Q6J("ngForOf",a.ob(e.data).expiryData_key)}}function A(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,O,10,4,"div",1),t.qZA()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngIf",null!=e.data)}}const P=function(n){return{data:n}},I=[{path:"",component:(()=>{class n{constructor(e){this.hs=e,this.data={contracts:"NIFTY",$data:(0,x.of)([]),$$data:new m.x,expiryData_key:[],expiryData:[]},this.ob=a=>a,this.oa=a=>Array.isArray(a)?a:[a]}ngOnInit(){this.data.$data=this.data.$$data.pipe((0,Z.z)(a=>this.getNew(a))),setTimeout(()=>{this.data.$$data.next(this.data.contracts)},100)}h_contracts(e){this.data.$$data.next(e)}getNew(e){let a=this;return this.hs.ajax("https://livedata.glitch.me/api/option/"+e).pipe((0,f.U)(o=>{let r=a.getAllopData({data:o}),c={data:o,expiryData:r,expiryData_key:Object.keys(r)};return console.log("dt=>",c),c}))}h_expiryDates(e,a){e.expiryData=this.getAllopData(a)}getexpiryData(e,a){let o=_.chain(a.data.records.data).filter({expiryDate:e}).value(),r=_.chain(o).filter(c=>(c?.PE?.strikePrice||0)<(c?.PE?.underlyingValue||0)).sortBy("PE.changeinOpenInterest").takeRight(3).value(),p=_.chain(o).filter(c=>(c?.CE?.strikePrice||0)>(c?.CE?.underlyingValue||0)).sortBy("CE.changeinOpenInterest").takeRight(3).value();return _.chain([...r,...p]).sortBy("strikePrice").value()}getAllopData(e){return _.chain(e.data.records.expiryDates).take(4).reduce((a,o)=>(a[o]=this.getexpiryData(o,e),a),{}).value()}check(e,a){return console.log(e,a,typeof e),e}reset(e,a){this.data.$$data.next(this.data.contracts)}n(e){return Number(e).toFixed(2)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-option"]],decls:2,vars:5,consts:[[4,"ngIf"],["class","row mt-2",4,"ngIf"],[1,"row","mt-2"],[1,"col-6"],[1,"form-select","form-select-sm",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-danger","me-2",3,"click"],[1,"fa-solid","fa-arrows-rotate"],["class","col-md-6 col-lg-6 col-12",4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-6","col-lg-6","col-12"],[1,"fw-semibold"],[1,"badge","text-bg-primary"],["id","example",1,"table","table-sm","table-striped","table-hover","mt-2"],[1,"header-fixed","bg"],[1,"text-end"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-end",3,"title"]],template:function(e,a){1&e&&(t.YNc(0,A,2,1,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.VKq(3,P,t.lcZ(1,1,a.data.$data)))},dependencies:[d.sg,d.O5,s.YN,s.Kr,s.EJ,s.JJ,s.On,d.Ov,d.JJ]}),n})()}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(I),h.Bz]}),n})(),k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,U,s.u5]}),n})()}}]);